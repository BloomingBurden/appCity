(()=>{"use strict";!function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}();const e=(e,t)=>{e.wrap.innerHTML="",e.input.value=t.currentTarget.textContent,e.input.setAttribute("value",t.currentTarget.textContent)},t=[],r=document.querySelector(".orders__list"),o=document.querySelector(".road__list");let n=0,a=0;(()=>{const e=document.querySelector(".orders__more"),s=document.querySelector(".road__show"),d=e=>{if("order"===e)for(let e=0;e<Math.min(3,t.length-a);e++)r.innerHTML+=t[a].order,a++;if("road"===e)for(let e=0;e<Math.min(3,t.length-n);e++)o.innerHTML+=t[n].roadItem,n++};e.addEventListener("click",d.bind(null,"order")),s.addEventListener("click",d.bind(null,"road"))})();const s=document.querySelector(".form-order__addr input"),d=document.querySelector(".cites"),c={item:null,input:s,wrap:d};let l=((e,t=300)=>{let r;return(...o)=>{clearTimeout(r),r=setTimeout((()=>{e.apply(void 0,o)}),t)}})((t=>{s.value.length<1||fetch(`https://api.geoapify.com/v1/geocode/autocomplete?text=${s.value}&format=json&apiKey=8e01b239842444148b628ba779696433`,{method:"GET"}).then((e=>e.json())).then((t=>{const r=document.createDocumentFragment();t.results.forEach((t=>{const o=document.createElement("li");o.classList.add("city"),o.textContent=t.formatted,r.append(o),c.item=t,o.addEventListener("click",e.bind(null,c))})),d.innerHTML="",d.append(r)})).catch((e=>console.log("error",e)))}),300);s.addEventListener("input",l),document.addEventListener("click",(e=>{d.innerHTML=""})),(e=>{const s=document.querySelector(".form-order");s.addEventListener("submit",(d=>{d.preventDefault(),e.item?(((e,s)=>{let d=`<li class="orders__item">\n                        <div class="orders__data">\n                            <h3 class="orders__preview">Адрес доставки</h3>\n                            <p class="orders__descr">${s.address.value}</p>\n                        </div>\n                        <div class="orders__data">\n                            <h3 class="orders__preview">Координаты</h3>\n                            <p class="orders__descr orders__descr--cord"><span>${e.lat}</span><span>${e.lon}</span></p>\n                        </div>\n                        <div class="orders__data">\n                            <h3 class="orders__preview">Расстояние</h3>\n                            <p class="orders__descr">2367.01 км</p>\n                        </div>\n                    </li>`,c=`<li class="road__item">\n                        <h3 class="road__preview">Маршрут 1</h3>\n                        <p class="road__text road__text-from">От адреса:  ДУ,Бургундия - Франш-конте,метрополия Франции,Франция</p>\n                        <p class="road__text road__text-to">До адреса: ${s.address.value}</p>\n                        <p class="road__text road__text-time">Время: <span>2367 мин</span></p>\n                        <p class="road__text road__text-volume">Объем аккумулятора: 8.58 %</p>\n                        <p class="road__text road__text-weight">Вес груза: ${s.weight.value}г</p>\n                    </li>`;t.push({order:d,roadItem:c}),n<3&&(r.innerHTML+=t[a].order,o.innerHTML+=t[n].roadItem,n++,a++)})(e.item,s),(()=>{const e=document.querySelectorAll(".footer__item"),t=document.querySelectorAll("[data-id-menu]");e.forEach(((e,t)=>{e.classList.remove("footer__item--current"),1===t&&e.classList.add("footer__item--current")})),t.forEach((e=>{e.classList.remove("layer--active"),2==+e.dataset.idMenu&&e.classList.add("layer--active")}))})(),e.item=null):(e.input.value="Пожалуйста, введите город из списка.",e.input.style.color="red",setTimeout((()=>{e.input.removeAttribute("style")}),3e3))}))})(c),window.addEventListener("load",(()=>{(()=>{const e=document.querySelectorAll(".footer__link"),t=document.querySelectorAll(".footer__item"),r=document.querySelectorAll("[data-id-menu]");e.forEach(((e,o)=>e.addEventListener("click",(n=>{n.preventDefault(),t.forEach((e=>e.classList.remove("footer__item--current"))),e.closest(".footer__item").classList.add("footer__item--current"),r.forEach((e=>{e.classList.remove("layer--active"),+e.dataset.idMenu===o+1&&e.classList.add("layer--active")}))}))))})()}))})();